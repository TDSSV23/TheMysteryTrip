<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Select dinâmico de estados e cidades</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>

  <h1>Select dinâmico de estados e cidades</h1>

  <select id="estado" name="estado">
    <option value="">Selecione um estado</option>
  </select>

  <select id="cidade" name="cidade">
    <option value="">Selecione uma cidade</option>
  </select>

  <script>
$(document).ready(function() {
  // Carrega os estados no select
  $.getJSON("https://servicodados.ibge.gov.br/api/v1/localidades/estados", function(data) {
    for (var i = 0; i < data.length; i++) {
      var option = $('<option value="' + data[i].sigla + '">' + data[i].nome + '</option>');
      $('#estado').append(option);
    }

    // Seleciona todos os estados no select
    $('#estado').val('');
    for (var i = 0; i < data.length; i++) {
      $('#estado').append($('<option value="' + data[i].sigla + '" selected>' + data[i].nome + '</option>'));
    }
  });

  // Quando o estado é selecionado, carrega as cidades
  $('#estado').on('change', function() {
    var estado = $(this).val();
    if (estado) {
      $.getJSON("https://servicodados.ibge.gov.br/api/v1/localidades/municipios/UF/" + estado, function(data) {
        $('#cidade').html('');
        for (var i = 0; i < data.length; i++) {
          var option = $('<option value="' + data[i].nome + '">' + data[i].nome + '</option>');
          $('#cidade').append(option);
        }
      });
    } else {
      $('#cidade').html('<option value="">Selecione uma cidade</option>');
    }
  });
});

  </script>

</body>
</html>
